---
// astro import
import { Icon } from 'astro-icon';
---

<section id="About-us">
    <div>
        <h2>Nosotros</h2>
        <div class="wrapper">
            <div class="about-us">
                <div class="image-picker">
                    <div class="image-holder selected" data-member="jorge" tabindex="0">
                        <img class="members-image" src="/img/avatar/jorge.jpg" alt="Foto de Jorge Cortez">
                    </div>
                    <div class="image-holder" data-member="maria" tabindex="0">
                        <img class="members-image" src="/img/avatar/maria.jpg" alt="Foto de María José Delgado">
                    </div>
                    <div class="image-holder" data-member="arantzazu" tabindex="0">
                        <img class="members-image" src="/img/avatar/arantzazu.jpg" alt="Foto de Arantzazú Calderón">
                    </div>
                </div>
                <div class="member-description">
                    <div class="display" data-member="jorge">
                        <h4>Jorge Cortez</h4>
                        <h5><Icon name="mdi:account-box" /> Ingeniero Comercial</h5>
                        
                        <h5><Icon name="mdi:chart-bar" /> Años de experiencia: <span class="important-contrast">5</span></h5>
                        <hr>
                        <h4>Sobre mí</h4>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia iure consequatur possimus rem ducimus iusto provident autem sint iste, quidem assumenda sapiente eum deserunt quae aut ipsum maxime culpa nulla?</p>

                        <h4>Lo que me apasiona</h4>
                        <ul>
                            <li>Comer</li>
                            <li>Bailar</li>
                            <li>Saltar</li>
                        </ul>
                    </div>
                    <div data-member="maria">
                        <h4>Jorge Cortez</h4>
                        <h5><Icon name="mdi:account-box" /> Ingeniero Comercial</h5>
                        
                        <h5><Icon name="mdi:chart-bar" /> Años de experiencia: <span class="important-contrast">5</span></h5>
                        <hr>
                        <h4>Sobre mí</h4>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia iure consequatur possimus rem ducimus iusto provident autem sint iste, quidem assumenda sapiente eum deserunt quae aut ipsum maxime culpa nulla?</p>

                        <h4>Lo que me apasiona</h4>
                        <ul>
                            <li>Comer</li>
                            <li>Bailar</li>
                            <li>Saltar</li>
                        </ul>
                    </div>
                    <div data-member="arantzazu">
                        <h4>Jorge Cortez</h4>
                        <h5><Icon name="mdi:account-box" /> Ingeniero Comercial</h5>
                        
                        <h5><Icon name="mdi:chart-bar" /> Años de experiencia: <span class="important-contrast">5</span></h5>
                        <hr>
                        <h4>Sobre mí</h4>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia iure consequatur possimus rem ducimus iusto provident autem sint iste, quidem assumenda sapiente eum deserunt quae aut ipsum maxime culpa nulla?</p>

                        <h4>Lo que me apasiona</h4>
                        <ul>
                            <li>Comer</li>
                            <li>Bailar</li>
                            <li>Saltar</li>
                        </ul>
                    </div>
                </div>
                <!-- <picture>
                    <source media="(min-width: 700px)" srcset="/img/logo/logo-name.webp 450w" />
                    <source media="(max-width: 699px)" srcset="/img/logo/logo-name.webp 800w" />
                    <img loading="lazy" src="/img/logo/logo-name.webp" alt="Lorem picsum" style="max-width: 100%;">
                </picture> -->
            </div>
        </div>
    </div>

    <div>
        <h2>Te ayudamos en</h2>
        <div class="about-us-wrapper">
            <div class="proposal fade">
                <span class="icon"><Icon class="proposal-icon" name="mdi:finance" /></span>
                <h3 class="title">Contabilidad y finanzas</h3>
                <p class="description">Nuestro equipo está capacitado para ofrecer servicios diseñados para optimizar la salud financiera de pequeñas y medianas empresas tanto en Iquique de forma presencial como a nivel nacional de  forma online, así mismo a cumplir con tus obligaciones tributarias ayudándote a tomar decisiones financieras informadas.</p>
            </div>
            <div class="proposal fade">
                <span class="icon"><Icon class="proposal-icon" name="mdi:fountain-pen-tip" /></span>
                <h3 class="title">Imagen corporativa</h3>
                <p class="description">En Crece Simple te ayudamos a transformar la percepción que tiene el mundo de tu empresa. Combinamos creatividad y estrategia para construir una identidad única y poderosa que refleje el espíritu de tu marca.</p>
            </div>
            <div class="proposal fade">
                <span class="icon"><Icon class="proposal-icon" name="ion:md-megaphone" /></span>
                <h3 class="title">Marketing</h3>
                <p class="description">Nuestro equipo de profesionales ofrece soluciones de marketing personalizadas para pequeñas y medianas empresas dentro de la ciudad de Iquique y a nivel nacional, ayudandote a aumentar la visibilidad de tu negocio, atraer más clientes y aumentar tus ventas.</p>
            </div>
        </div>

    </div>
    <div class="divider">
        <div class="custom-shape-divider-bottom-1690984327">
            <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M1200 120L0 16.48 0 0 1200 0 1200 120z" class="shape-fill"></path>
            </svg>
        </div>
    </div>
</section>


<style lang="scss">
    .about-us {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 2rem;

        @media only screen and (max-width: 860px) {
            grid-template-columns: 1fr;
        }

        img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: .25rem;
        }

        .image-picker {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;

            .image-holder {
                flex: 1 0 calc(50% - 1rem);

                border-radius: .25rem;
                cursor: pointer;

                &:is(:hover, :focus-visible) {
                    outline: 1px solid hsl(var(--white));
                    outline-offset: 2px;
                }

                &:is(.selected) {
                    flex: 1 0 100%;
                }
            }
        }

        .member-description {
            & > * {
                display: flex;
                flex-direction: column;

                opacity: 0;
                visibility: collapse;
                position: absolute;
                pointer-events: none;
                

                &:is(.display) {
                    opacity: 1;
                    visibility: visible;
                    position: static;
                    pointer-events: initial;
                    transition: opacity 1000ms cubic-bezier(0.075, 0.82, 0.165, 1);
                }

                hr {
                    width: 100%;
                    border-color: hsl(0 0% 35% / .5);
                }

                h4 {
                    font-size: 2rem;
                    margin-block-end: 0;
                    margin-block-start: 1.5rem;

                    &:first-child {
                        margin-block-start: 0;
                    }
                }

                h5 {
                    margin: 0;
                    // padding-inline-start: .75rem;
                    color: gray;

                    svg {
                        width: 20px;
                        position: relative;
                        top: 4px;
                    }
                }

                p {
                    padding-inline-start: .75rem;
                }
            }
        }
    }


    .main-picture {
        max-width: 100%;
    }

    .about-us-icon {
        display: inline;
        width: 1.5rem;
        aspect-ratio: 1;
        position: relative;
        top: 3px;
        color: hsl(var(--important-contrast))
    }

    .proposal-icon {
        display: block;
        width: 2rem;
        aspect-ratio: 1;
        color: hsl(var(--white));
    }

    #About-us {
        color: hsl(var(--main-dark));
        background-color: hsl(var(--white));
        position: relative;
    }

    #About-us > div:first-child {
        margin-block-end: 5rem;
    }

    #About-us > div {
        display: flex;
        flex-direction: column;
        justify-content: center;
        filter: hue-rotate();


        width: 100%;
        max-width: 1100px;
        margin-inline: auto;
        padding: var(--padding);
    }

    #About-us > div > h3 {
        margin: 0;
        font-size: .875rem;
        color: hsl(var(--important));    

        text-align: center;
    }

    #About-us > div > h2 {
        font-size: 3rem;
        margin-block-start: 0;
        
        text-align: center;
    }

    .about-us h3 {
        margin: 0;
    }

    @media only screen and (max-width: 699px) {
        .about-us {
            grid-template-columns: repeat(1, 1fr);
            gap: 1rem;
        }
    }

    .about-us-wrapper {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
        gap: var(--padding);
        justify-items: center;
    }

    @media only screen and (max-width: 864px) {
        .about-us-wrapper .proposal:nth-of-type(3) {
            grid-column: 1 / 2 span;
        }
    }

    @media only screen and (max-width: 595px) {
        .about-us-wrapper .proposal:nth-of-type(3) {
            grid-column: 1 / 1;
        }
    }

    .proposal {
        display: flex;
        flex-direction: column;
        align-items: center;

        max-width: 18rem;

        padding: var(--padding);
        border-radius: var(--radius-accent);
        line-height: 1.6;
    }

    .proposal:is(:hover, :focus-visible) {
        background-color: hsl(var(--main-dark), 5%);
    }

    .icon {
        display: grid;
        place-items: center;
        justify-content: center;

        width: calc(var(--padding) + 0.75rem);
        height: calc(var(--padding) + 0.75rem);

        padding: calc(var(--padding) + .75rem);
        background-color: hsl(var(--important));
        border-radius: 50%;
    }

    .title {
        text-align: center;
    }

    .divider {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        max-width: 100% !important;
    }

    .custom-shape-divider-bottom-1690984327 {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        overflow: hidden;
        line-height: 0;
        transform: rotate(180deg);
    }

    .custom-shape-divider-bottom-1690984327 svg {
        position: relative;
        display: block;
        width: calc(100% + 1.3px);
        height: 100px;
    }

    .custom-shape-divider-bottom-1690984327 .shape-fill {
        fill: #9cb8bc;
    }
</style>

<script lang="js">
window.addEventListener('load', function() {
    const imagePicker = document.querySelector('.image-picker');
    const imageHolders = document.querySelectorAll('.image-holder');
    const memberDescriptions = document.querySelectorAll('.member-description > div');

    function selectImageHolder(imageHolder, index) {
        console.log('selectImageHolder', imageHolder, index);
        imageHolders.forEach((imageHolder) => {
            imageHolder.classList.remove('selected');
        });
        memberDescriptions.forEach((memberDescription) => {
            memberDescription.classList.remove('display');
        });
        imageHolder.classList.add('selected');
        memberDescriptions[index].classList.add('display');
        imagePicker.prepend(imageHolder);
    }

    imageHolders.forEach((imageHolder, index) => {
        imageHolder.addEventListener('mousedown', function(event) {
            console.log('mousedown', event);
            event.preventDefault();
        });
        imageHolder.addEventListener('click', function() {
            console.log('click', this);
            selectImageHolder(imageHolder, index);
        });
        imageHolder.addEventListener('keydown', function(event) {
            console.log('keydown', event);
            if (event.key === 'Enter') {
                selectImageHolder(imageHolder, index);
            } else if (event.key === 'ArrowRight') {
                const nextIndex = (index + 1) % imageHolders.length;
                selectImageHolder(imageHolders[nextIndex], nextIndex);
            } else if (event.key === 'ArrowLeft') {
                const prevIndex = (index - 1 + imageHolders.length) % imageHolders.length;
                selectImageHolder(imageHolders[prevIndex], prevIndex);
            }
        });
    });
});



</script>